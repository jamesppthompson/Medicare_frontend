(self.webpackChunkreact_mui_pro_starter=self.webpackChunkreact_mui_pro_starter||[]).push([[384],{34117:function(e,n,t){"use strict";var r=t(74165),i=t(15861),s=t(29396),o=t(90240);function a(){return(a=(0,i.Z)((0,r.Z)().mark((function e(n,t){var i,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://call.medicaremagician.us",REACT_APP_GOOGLE_API_CLIENT_ID:"_YOUR_CLIENT_ID_HERE_",REACT_APP_LOG_LEVEL:"DEBUG"}.REACT_APP_MULTIPASS){e.next=2;break}return e.abrupt("return",{nameFirst:"Leeloo",nameLast:"Dallas",phone:"+1234567890",email:"Leeloo.Dallas@Multipass.com"});case 2:return e.prev=2,(0,o.Z)(n),e.next=6,null===s.h||void 0===s.h||null===(i=s.h.axios)||void 0===i?void 0:i.get(t);case 6:if(200!==(null===(a=e.sent)||void 0===a?void 0:a.status)){e.next=11;break}return c=a.data,log.warn("".concat(n," -"),c),e.abrupt("return",c);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),log.error("".concat(n," -"),e.t0);case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}n.Z=function(e,n){return a.apply(this,arguments)}},70683:function(e,n,t){"use strict";var r=t(29439),i=(t(72791),t(86039)),s=t(62812),o=t(94162),a=t(59291),c=t(80184);n.Z=function(e){var n,t=(0,a.qr)(),l=(0,r.Z)(t,2),u=l[0];l[1];return(0,c.jsx)(i.Z,{sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%"},children:(0,c.jsxs)(o.Z,{children:[(0,c.jsx)(s.Z,{variant:"h6",children:"Call as"}),(0,c.jsx)(s.Z,{variant:"button",children:null===(n=u.currentUser)||void 0===n?void 0:n.phone})]})})}},5829:function(e,n,t){"use strict";t(72791);var r=t(86039),i=t(39753),s=t(26002),o=t(87764),a=t(80184);n.Z=function(e){return(0,a.jsxs)(r.Z,{sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%"},children:[(0,a.jsx)(i.ZP,{sx:{ml:1,flex:1},placeholder:"Enter a name or number",inputProps:{"aria-label":"enter a name or number"},value:e.phoneNumber,onChange:function(n){e.handlePhoneNumber(n.target.value)}}),(0,a.jsx)(o.Z,{variant:"extended",sx:{p:"10px",m:1},"aria-label":"call",color:"success",disabled:0==e.phoneNumber.length,onClick:function(){e.handleDialing(!0)},children:(0,a.jsx)(s.Z,{sx:{mr:2,ml:2}})})]})}},7524:function(e,n,t){"use strict";t.d(n,{Z:function(){return F}});var r=t(74165),i=t(15861),s=t(29439),o=t(1413),a=t(45987),c=t(72791),l=(t(7538),t(80349),t(75579)),u=t(94162),d=t(87764),h=t(60277),p=t(58195),x=t(75196),m=t(29823),f=t(40464),g=t(10073),v=t(99749),Z=t(62812),j=t(12162),y=t(42419),b=t(83423),C=t(34117),w=t(29396),k=t(59291),S=t(18219),D=t(80184);function P(e){var n=function(e){return[Math.floor(e/864e5),Math.floor(e%864e5/36e5),Math.floor(e%36e5/6e4),Math.floor(e%6e4/1e3)]},t=function(){var t=e.timestamp,r=(0,c.useState)(0),i=(0,s.Z)(r,2),o=i[0],a=i[1];return(0,c.useEffect)((function(){var e=setInterval((function(){var e=(new Date).getTime()-t;a(e)}),1e3);return function(){return clearInterval(e)}}),[t]),n(o)}(),r=(0,s.Z)(t,4),i=(r[0],r[1]),o=r[2],a=r[3];return(0,D.jsxs)("div",{children:[(0,D.jsx)("span",{className:"time-1",children:i}),(0,D.jsx)("span",{className:"time-2",children:" : "}),(0,D.jsx)("span",{className:"time-3",children:o}),(0,D.jsx)("span",{className:"time-4",children:" : "}),(0,D.jsx)("span",{className:"time-5",children:a})]})}var E=t(67970),I=t(58875),N=t(86342),_=t(58320),A=t(45254),T=t(98032),R=(t(94933),t(7076),t(29350),t(45224),["children","onClose"]),L=(0,h.ZP)(p.Z)((function(e){var n=e.theme;return{"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)}}}));function O(e){var n=e.children,t=e.onClose,r=(0,a.Z)(e,R);return(0,D.jsxs)(f.Z,(0,o.Z)((0,o.Z)({sx:{m:0,p:2}},r),{},{children:[n,t?(0,D.jsx)(x.Z,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,D.jsx)(m.Z,{})}):null]}))}var F=function(e){var n=(0,c.useState)(!1),t=(0,s.Z)(n,2),o=t[0],a=t[1],h=(0,c.useState)(""),p=(0,s.Z)(h,2),x=p[0],m=p[1],f=(0,c.useState)([]),R=(0,s.Z)(f,2),F=R[0],z=R[1],U=(0,c.useState)(!1),H=(0,s.Z)(U,2),W=H[0],G=H[1],M=(0,k.qr)(),K=(0,s.Z)(M,2),V=K[0],B=(K[1],function(){a(!1)}),q=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===w.h||void 0===w.h||null===(n=w.h.auth)||void 0===n?void 0:n.post("api/twilio/addUser",{PhoneNumber:x.phone,SessionID:V.currentUser.id});case 2:G(!0),a(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.Z)((0,S.AI)(),"api/clients");case 2:n=e.sent,console.log(n),z(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return(0,D.jsxs)(u.Z,{spacing:3,style:{width:"80%",height:"100%",marginTop:"30%"},justifyContent:"center",children:[(0,D.jsxs)(u.Z,{direction:"row",spacing:2,justifyContent:"center",children:[W&&(0,D.jsxs)(u.Z,{children:[(0,D.jsx)(u.Z,{spacing:3,justifyContent:"center",direction:"row",children:(0,D.jsx)(b.Z,{src:E,sx:{width:84,height:84}})}),(0,D.jsx)(u.Z,{spacing:3,justifyContent:"center",direction:"row",children:(0,D.jsx)(Z.Z,{variant:"h6",children:x.name})})]}),(0,D.jsxs)(u.Z,{children:[(0,D.jsx)(u.Z,{spacing:3,justifyContent:"center",direction:"row",children:(0,D.jsx)(b.Z,{src:E,sx:{width:84,height:84}})}),(0,D.jsx)(u.Z,{spacing:3,justifyContent:"center",direction:"row",children:(0,D.jsx)(Z.Z,{variant:"h6",children:e.user})})]})]}),!e.isCallStarted&&(0,D.jsx)(u.Z,{spacing:3,justifyContent:"center",direction:"row",children:(0,D.jsx)(Z.Z,{variant:"h6",children:"Calling..."})}),e.isCallStarted&&(0,D.jsx)(u.Z,{spacing:3,justifyContent:"center",direction:"row",children:(0,D.jsx)(Z.Z,{variant:"h6",children:(0,D.jsx)(P,{timestamp:e.timestamp})})}),(0,D.jsxs)(u.Z,{spacing:3,justifyContent:"center",direction:"row",style:{marginBottom:"20px"},children:[e.isCallStarted&&(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(d.Z,{"aria-label":"call-end",color:"default",onClick:function(){return a(!o)},children:(0,D.jsx)(y.Z,{sx:{mr:2,ml:2}})})}),(0,D.jsx)(d.Z,{"aria-label":"call-end",color:"error",onClick:function(){return e.endCall()},children:(0,D.jsx)(j.Z,{sx:{mr:2,ml:2}})})]}),(0,D.jsxs)(L,{onClose:B,"aria-labelledby":"customized-dialog-title",open:o,sx:{minWidth:500},children:[(0,D.jsx)(O,{id:"customized-dialog-title",onClose:B,sx:{minWidth:500},children:"Add a new participant"}),(0,D.jsx)(g.Z,{dividers:!0,children:(0,D.jsxs)(u.Z,{direction:"row",spacing:5,children:[(0,D.jsxs)(A.Z,{sx:{m:1,minWidth:200},size:"small",children:[(0,D.jsx)(I.Z,{id:"demo-select-small",children:"Top marketer"}),(0,D.jsx)(T.Z,{labelId:"demo-select-small",id:"demo-select-small",value:x,label:"Top marketer",onChange:function(e){m(e.target.value),console.log(e.target.value)},children:F.map((function(e){return(0,D.jsx)(N.Z,{value:e,children:e.name},e._id)}))})]}),(0,D.jsx)(_.Z,{id:"standard-basic",label:" ",variant:"standard",value:x.phone,InputProps:{readOnly:!0}})]})}),(0,D.jsx)(v.Z,{children:(0,D.jsx)(l.Z,{autoFocus:!0,onClick:q,children:"Add"})})]})]})}},93812:function(e,n,t){"use strict";t(72791),t(7538),t(80349);var r=t(75579),i=t(94162),s=t(62812),o=t(8047),a=(t(94933),t(7076),t(29350),t(45224),t(80184));n.Z=function(e){var n=e.onClickNumber;return(0,a.jsx)(i.Z,{spacing:3,style:{width:"80%"},children:[[{number:"1",alpha:""},{number:"2",alpha:"a b c"},{number:"3",alpha:"d e f"}],[{number:"4",alpha:"g h i"},{number:"5",alpha:"j k l"},{number:"6",alpha:"m n o"}],[{number:"7",alpha:"p q r s"},{number:"8",alpha:"t u v"},{number:"9",alpha:"w x y z"}],[{number:"*",alpha:""},{number:"0",alpha:""},{number:"#",alpha:""}]].map((function(e){return(0,a.jsx)(i.Z,{direction:"row",spacing:0,children:(0,a.jsx)(o.ZP,{container:!0,rowSpacing:0,children:e.map((function(e,t){return(0,a.jsx)(o.ZP,{item:!0,xs:4,children:(0,a.jsx)(r.Z,{variant:"text",color:"info",style:{width:"100%"},onClick:function(){return t=e.number,void n(t);var t},children:(0,a.jsxs)(i.Z,{spacing:0,children:[(0,a.jsx)(s.Z,{variant:"h4",children:e.number}),""===e.alpha&&(0,a.jsx)(s.Z,{variant:"button",children:"\xa0"}),""!==e.alpha&&(0,a.jsx)(s.Z,{variant:"button",children:e.alpha})]})})},t)}))})})}))})}},50267:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return U}});var r=t(57689),i=t(29439),s=(t(7043),t(72791)),o=t(8047),a=t(74165),c=t(15861),l=(t(7538),t(80349),t(94162)),u=t(95431),d=t(93812),h=t(7524),p=t(5829),x=t(70683),m=t(80610),f=t(44315),g=t(80184),v=function(e){(0,r.s0)(),(0,r.TH)();var n=(0,m.Z)(),t=n.isCallingState,i=n.setIsCallingState,o=n.setIsIncomingCall,v=n.call,Z=n.setCall,j=n.device,y=n.setDevice,b=(n.acceptIncomingCall,n.rejectIncomingCall,n.hangupIncomingCall,n.handleDisconnectedIncomingCall,n.isCalling),C=n.setIsCalling,w=(0,f.Z)().twilioToken;(0,s.useEffect)((function(){function n(){return(n=(0,c.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null!=w&&(console.log(e.dialNumber),e.setDialNumber(e.dialNumber),function(){n.apply(this,arguments)}())}),[w]),(0,s.useEffect)((function(){if(console.log("device useEffect:",j),j){console.log("device:",j),D();try{console.log("device:",j),j.register()}catch(e){console.log(e)}}}),[j]);var k=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("Got a token.",w),S(w)}catch(n){console.log("An error occurred. See your browser console for more information."),console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){console.log("Initializing device"),y(new u.AS(e,{logLevel:1,codecPreferences:["opus","pcmu"]}))},D=function(){j.on("registered",(function(){console.log("Twilio.Device Ready to make and receive calls!")})),j.on("error",(function(e){console.log("Twilio.Device Error: "+e.message)})),j.on("incoming",P),j.audio.on("deviceChange",E.bind(j)),j.audio.isOutputSelectionSupported&&console.log("audioSelectionDiv.classList.remove('hide')")},P=function(e){console.log("Incoming call from ".concat(e.parameters.From)),Z(e),o(!0)},E=function(){j&&(I("speakerDevices",j.audio.speakerDevices.get()),I("ringtoneDevices",j.audio.ringtoneDevices.get()))},I=function(e,n){j.audio.availableOutputDevices.forEach((function(e,t){n.size;n.forEach((function(e){e.deviceId===t&&!0}))}))},N=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={To:n},!j){e.next=16;break}return console.log("Attempting to call ".concat(t.To," ...")),e.prev=3,e.next=6,j.connect({params:t});case 6:r=e.sent,_(r),Z(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:e.next=17;break;case 16:console.log("Unable to make call.");case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),_=function(e){e.on("accept",(function(e){console.log("registerCallEvents: accept"),R()})),e.on("disconnect",(function(){C(!1),i(!1),console.log("registerCallEvents: disconnect")})),e.on("cancel",(function(){console.log("registerCallEvents: cancel"),T()}))},A=function(){var n=(0,c.Z)((0,a.Z)().mark((function n(t){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:C(t),console.log("Calling...",e.dialNumber),N(e.dialNumber),e.setDialNumber("");case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),T=function(){try{console.log("call:",v),v.disconnect(),console.log("call disconnected"),C(!1),i(!1),e.triggerReload(!0)}catch(n){console.log(n)}},R=function(){i(!0)};return(0,g.jsxs)(l.Z,{justifyContent:"center",alignItems:"center",spacing:5,children:[(0,g.jsx)(x.Z,{}),b?(0,g.jsx)(h.Z,{isCallStarted:t,endCall:T,user:e.user,call:v,makeCall:N,timestamp:(new Date).getTime()}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.Z,{handlePhoneNumber:function(n){console.log(n),e.setDialNumber(n)},phoneNumber:e.dialNumber,handleDialing:A}),(0,g.jsx)(d.Z,{onClickNumber:function(n){e.setDialNumber(e.dialNumber+n)}})]})]})},Z=t(1413),j=t(96015),y=t(1225),b=t(19978),C=t(4346),w=t(46601),k=t(83423),S=t(62812),D=t(28321),P=t(34117),E=t(18219);function I(e){var n=e.setDialNumber,t=(0,s.useState)([]),r=(0,i.Z)(t,2),l=r[0],u=r[1];return(0,s.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.Z)((0,E.AI)(),"api/clients");case 2:n=e.sent,console.log(n),u(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,g.jsxs)(o.ZP,{container:!0,direction:"column",style:{width:"100%"},children:[(0,g.jsx)(o.ZP,{item:!0,xs:5,style:{display:"flex",justifyContent:"center",borderRight:"ridge"},children:(0,g.jsx)("h1",{style:{width:"100%",textAlign:"center",verticalAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:" Contacts"})}),(0,g.jsx)(o.ZP,{item:!0,xs:5,style:{display:"flex",justifyContent:"center",borderRight:"ridge"},children:(0,g.jsx)(j.Z,{sx:{width:"100%",height:"100%",maxWidth:"none",bgcolor:"background.paper"},children:(0,g.jsx)(D.FixedSizeList,{height:600,itemSize:60,itemCount:null===l||void 0===l?void 0:l.length,overscanCount:5,itemData:l,children:function(e){return function(e){var n,t,r,i=e.data,o=e.index,a=e.style,c=e.triggerDialNumber;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(y.ZP,{style:a,component:"div",children:(0,g.jsxs)(b.Z,{style:{minHeight:"60px"},onClick:function(){var e;return c(null===(e=i[o])||void 0===e?void 0:e.phone)},children:[(0,g.jsx)(w.Z,{children:(0,g.jsx)(k.Z,{alt:null===(n=i[o])||void 0===n?void 0:n.name,src:"/static/images/avatar/1.jpg"})}),(0,g.jsx)(C.Z,{primary:null===(t=i[o])||void 0===t?void 0:t.name,secondary:(0,g.jsxs)(s.Fragment,{children:[(0,g.jsx)(S.Z,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:"Number"}),null===(r=i[o])||void 0===r?void 0:r.phone]})})]})},o)})}((0,Z.Z)((0,Z.Z)({},e),{},{triggerDialNumber:n}))}})})})]})}var N=t(65514),_=t(26002),A=t(74912),T=t.n(A);T().config.update({accessKeyId:"AKIAYJALDLHGA4ZVWLOU",secretAccessKey:"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",region:"us-east-1"});var R=new(T().S3),L={Bucket:"call-center-recording-store",Prefix:"AC0ef229572e466259231e6fe6d9dc3ad8"};function O(e){var n=e.data,t=e.index,r=e.style;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(y.ZP,{style:r,component:"div",children:(0,g.jsxs)(b.Z,{style:{minHeight:"30px"},children:[(0,g.jsx)(N.Z,{children:(0,g.jsx)(_.Z,{})}),(0,g.jsx)(C.Z,{primary:"Outgoing call ".concat(t+1)}),(0,g.jsx)("audio",{controls:!0,children:(0,g.jsx)("source",{src:"https://call-center-recording-store.s3.amazonaws.com/"+n[t].Key,height:"30px",type:"audio/x-wav"})})]})},t)})}function F(e){var n,t=(0,s.useState)([]),r=(0,i.Z)(t,2),a=r[0],c=r[1];return console.log(e.isReload),(0,s.useEffect)((function(){R.listObjectsV2(L,(function(e,n){e?console.log(e,e.stack):(console.log("key values : ",n),c(n))}))}),[]),e.isReload&&(R.listObjectsV2(L,(function(e,n){e?console.log(e,e.stack):(console.log("key values : ",n),c(n))})),e.triggerReload(!1)),(0,g.jsxs)(o.ZP,{container:!0,direction:"column",style:{width:"100%"},children:[(0,g.jsx)(o.ZP,{item:!0,xs:5,style:{display:"flex",justifyContent:"center",borderRight:"ridge"},children:(0,g.jsx)("h1",{style:{width:"100%",textAlign:"center",verticalAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:" History"})}),(0,g.jsx)(o.ZP,{item:!0,xs:5,style:{display:"flex",justifyContent:"center",borderRight:"ridge"},children:(0,g.jsx)(j.Z,{sx:{width:"100%",height:"100%",maxWidth:"none",bgcolor:"background.paper"},children:(0,g.jsx)(D.FixedSizeList,{height:600,itemSize:70,itemCount:null===(n=a.Contents)||void 0===n?void 0:n.length,overscanCount:5,itemData:a.Contents,children:O})})})]})}t(9361);var z=function(){var e=s.useState(12),n=(0,i.Z)(e,2),t=(n[0],n[1],(0,s.useState)("")),r=(0,i.Z)(t,2),a=r[0],c=r[1],l=(0,s.useState)(!1),u=(0,i.Z)(l,2),d=u[0],h=u[1],p=function(e){console.log(e),c(e)};return(0,s.useEffect)((function(){console.log("----- reload event triggered ------")}),[d]),(0,g.jsxs)(o.ZP,{container:!0,direction:"row",style:{height:"100%"},children:[(0,g.jsx)(o.ZP,{item:!0,xs:5,style:{display:"flex",justifyContent:"center",borderRight:"ridge"},children:(0,g.jsx)("div",{style:{width:"100%",height:"90vh"},children:(0,g.jsx)(F,{isReload:d,triggerReload:h})})}),(0,g.jsx)(o.ZP,{item:!0,xs:4,style:{display:"flex",justifyContent:"center",borderRight:"ridge",width:"100%"},children:(0,g.jsx)("div",{style:{width:"100%",height:"90vh"},children:(0,g.jsx)(I,{setDialNumber:p})})}),(0,g.jsx)(o.ZP,{item:!0,xs:3,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,g.jsx)("div",{style:{marginBottom:"10%",marginTop:"10%",width:"100%",height:"100%"},children:(0,g.jsx)(v,{triggerReload:h,dialNumber:a,setDialNumber:p,user:"Tom"})})})]})},U=function(){return(0,g.jsx)(r.Z5,{children:(0,g.jsx)(r.AW,{path:"/",element:(0,g.jsx)(z,{})})})}},43004:function(){}}]);
//# sourceMappingURL=384.d53a9e13.chunk.js.map